namespace = nda_cas # Clark Ashton Smith
# http://www.eldritchdark.com/writings/short-stories/91/the-holiness-of-az%C3%A9darac
nda_cas.10 = { # The Holiness of Azedarac - Character event
	type = country_event
	placement = p:xA27EFD #scope:target_state
	title = nda_cas.10.t
	desc = nda_cas.10.d
	flavor =  nda_cas.10.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/southamerica_christianity.bk2"
		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	trigger = {
 		# 1842 and owner of Averoigne 
		game_date >= 1842.3 
		game_date < 1843
		p:xA27EFD = { state = { owner = ROOT } }

	}

	cooldown = { months = 12 }

	immediate = {
		# create character - unusual effects if later used for IG leader - jusy use for localisation
		create_character = {
			template = protagonist_azedarac 
			on_created = {
				set_variable = is_azedarac									
			}
		}

		#random_character_in_void = {
		random_scope_character = {
			limit = {
				has_variable = is_azedarac
			}
			save_scope_as = scope_azedarac
		}			

		debug_log = "Azedarac - Start"
	}	
	
	option = { #"Must come to the capital" - set as Devout leader and Master Cultist
		name = nda_cas.10.a
		default_option = yes

		#hidden_effect = {
		#	scope:azedarac = { 
		#		add_trait = nda_master 
		#	}			
		#}
		#scope:azedarac = { 
		#	set_as_interest_group_leader = yes # does not work? - they get appointed but then disappear.
		#}

		# create_character = {
		# 	first_name = "Hildred"
		# 	last_name = "Azedarac"
		# 	female = no
		# 	birth_date = 1807.7.4
		# 	interest_group = ig_devout
		# 	ig_leader = yes
		# 	dna = ecchi_dna_charles_dickens
		# 	ideology = ideology_nda_cultist
		# 	religion = rel:catholic
		# 	traits = {	
		# 		charismatic			
		# 		inspirational_orator
		# 		nda_master # just for now 				
		# 	}
		# 	on_created = {
		# 		set_variable = is_azedarac	
		# 		set_as_interest_group_leader = yes			
		# 	}
		# }

		debug_log = "Azedarac - IG Leader"

		hidden_effect = {
			scope:scope_azedarac = { 
				add_trait = nda_master 
				set_character_immortal = yes	
			}			
		}

		scope:scope_azedarac = { 
			set_as_interest_group_leader = yes	
		}

		ai_chance = { # will +ve effect conversion rate
			base = 80		
		}
	}

	option = { #"Must go to the Holy See" - send/exile to Vatican
		name = nda_cas.10.b
		hidden_effect = {
			scope:scope_azedarac = { 
				add_trait = nda_master 
				set_character_immortal = yes	
			}			
		}

		p:xB040A0 = { # Rome
			state = { 
				# add to country
				owner = {
					save_scope_as = scope_rome
					# create_character = {
					# 	first_name = "Hildred"
					# 	last_name = "Azedarac"
					# 	female = no
					# 	birth_date = 1807.7.4
					# 	interest_group = ig_devout
					# 	ig_leader = yes
					# 	dna = ecchi_dna_charles_dickens
					# 	ideology = ideology_nda_cultist
					# 	religion = rel:catholic
					# 	traits = {
					# 		charismatic
					# 		inspirational_orator
					# 		nda_master # just for now 				
					# 	}
					# 	is_agitator = yes
					# 	on_created = {
					# 		set_variable = is_azedarac	
					# 		#add_character_role = agitator			
					# 	}
					# }
				}
			}
		}

		scope:scope_azedarac = { 
			add_character_role = agitator			
			transfer_character = scope:scope_rome
		}

		debug_log = "Azedarac - In Rome"
		ai_chance = { 
			base = 10		
		}
	}
	option = { #"Should continue their work in Averoigne" - set as cult agitator?
		name = nda_cas.10.c

		ai_chance = { 
			base = 10		
		}

		hidden_effect = {
			scope:scope_azedarac = { 
				add_trait = nda_master 
				add_character_role = agitator
			}			
		}

		# create_character = {
		# 	first_name = "Hildred"
		# 	last_name = "Azedarac"
		# 	female = no
		# 	birth_date = 1807.7.4
		# 	interest_group = ig_devout
		# 	ig_leader = yes
		# 	dna = ecchi_dna_charles_dickens
		# 	ideology = ideology_nda_cultist
		# 	religion = rel:catholic
		# 	traits = {
		# 		charismatic
		# 		inspirational_orator
		# 		nda_master # just for now 				
		# 	}
		# 	on_created = {
		# 		set_variable = is_azedarac
		# 		add_character_role = agitator				
		# 	}
		# }

		debug_log = "Azedarac - Roman Agitator"
	}
}
