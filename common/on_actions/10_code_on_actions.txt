# For on_actions launched by the code itself.
# Overrides Base because of stupid France error - or does it?
# Root = Country
on_monthly_pulse_country = {
	effect = {
		every_character_in_exile_pool = {
			limit = {
				popularity <= 15
			}
			kill_character = yes
		}
		if = {
			limit = {
				year < 1930
				NOT = { has_global_variable = germany_formed }
				c:GER ?= { is_country_alive = yes }
			}
			set_global_variable = germany_formed
		}
		if = {
			limit = {
				exists = c:FRA
				THIS = c:FRA
				c:FRA ?= {
					OR = {
						has_modifier = modifier_haitian_independence_payments_1
						has_modifier = modifier_haitian_independence_payments_2
						has_modifier = modifier_haitian_independence_payments_3
						has_modifier = modifier_haitian_independence_payments_4
					}
				}
				NOT = { exists = c:HAI }
			}
			c:FRA = {
				if = {
					limit = {
						has_modifier = modifier_haitian_independence_payments_1
					}
					remove_modifier = modifier_haitian_independence_payments_1
				}
				if = {
					limit = {
						has_modifier = modifier_haitian_independence_payments_2
					}
					remove_modifier = modifier_haitian_independence_payments_2 
				}
				if = {
					limit = {
						has_modifier = modifier_haitian_independence_payments_3
					}
					remove_modifier = modifier_haitian_independence_payments_3
				}
				if = {
					limit = {
						has_modifier = modifier_haitian_independence_payments_4
					}
					remove_modifier = modifier_haitian_independence_payments_4
				}
			}
		}
		if = {
			limit = {
				c:TEX ?= this
				NOT = {
					has_variable = santa_anna_captured
				}
				exists = c:MEX
				any_diplomatic_play = {
					initiator_is = c:TEX
					target_is = c:MEX
				}
				c:MEX = {
					is_player = no
					any_scope_character = {
						has_variable = is_santa_anna
					}
				}
				game_date >= 1836.4.21 # Battle of San Jacinto
				game_date < 1838.1.1
			}
			trigger_event = { id = texan_war_of_independence.3 days = 0 popup = yes } # Santa Anna Captured
		}
	}
}